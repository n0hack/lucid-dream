---
import { getCollection } from 'astro:content';
import {
  HomeMainImage,
  HomeProjectSection,
  HomeProjectSlider,
  HomeStorySection,
  HomeStorySlider,
} from '@components/home';
import { MainLayout } from '@components/layout';
import { PROJECT_SLIDE_MAX_COUNT, STORY_SLIDE_MAX_COUNT } from '@constants';

const projectCollection = await getCollection('project');
const projects = projectCollection
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, PROJECT_SLIDE_MAX_COUNT);

const storyCollection = await getCollection('story');
const stories = storyCollection
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, STORY_SLIDE_MAX_COUNT);
---

<MainLayout pageTitle="루시드 드림 𖤐">
  <HomeMainImage />
  <HomeProjectSection>
    <HomeProjectSlider projects={projects} client:only />
  </HomeProjectSection>
  <HomeStorySection>
    <HomeStorySlider stories={stories} client:only />
  </HomeStorySection>
</MainLayout>
