---
import type { GetStaticPaths } from 'astro';
import { getCollection } from 'astro:content';
import { Lazy, Pagination, Responsive, Section } from '@components/common';
import { ProjectCard, ProjectPageHeader } from '@components/project';
import { Layout } from '@components/layout';
import { PageSEO } from '@components/helper';

export const getStaticPaths = (async ({ paginate }) => {
  const projectCollection = await getCollection('project');
  const projects = projectCollection.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

  return paginate(projects, { pageSize: 4 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;
---

<Layout pageTitle="ì—´ì‹¬ížˆ ë§Œë“¤ì–´ ì˜¨ í”„ë¡œì íŠ¸ (ï½¡â€¢Ì€á´—-)âœ§" headerBg>
  <Section>
    <Responsive>
      <ProjectPageHeader />
      <Lazy className="mt-12 flex flex-col gap-12 lg:mt-20">
        {
          page.data.map(({ data }) => (
            <ProjectCard
              thumbnail={data.thumbnail}
              title={data.title}
              descriptions={data.descriptions}
              tags={data.tags}
              links={data.links}
            />
          ))
        }
      </Lazy>
      <Pagination
        className="mt-12 lg:mt-20"
        page={page.currentPage}
        lastPage={page.lastPage}
        buttonUrlPrefix="/project/page"
        prevUrl={page.url.prev}
        nextUrl={page.url.next}
        client:load
      />
    </Responsive>
  </Section>

  <!-- HEAD -->
  <PageSEO
    slot="meta-data"
    title="ì—´ì‹¬ížˆ ë§Œë“¤ì–´ ì˜¨ í”„ë¡œì íŠ¸ (ï½¡â€¢Ì€á´—-)âœ§"
    description="í’ë¶€í•œ ìƒìƒê³¼ í˜¸ê¸°ì‹¬ìœ¼ë¡œ ë§Œë“¤ì–´ ì˜¨ ë‹¤ì–‘í•œ í”„ë¡œì íŠ¸ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤ ðŸ’»"
    keywords={['í”„ë¡œì íŠ¸', 'Project']}
  />
</Layout>
