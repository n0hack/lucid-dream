---
import { Image } from 'astro:assets';
import type { Project } from '@custom-types/post';
import ProjectCardDesktopLink from './ProjectCardDesktopLink.astro';
import ProjectCardMobileLink from './ProjectCardMobileLink.astro';

type Props = Omit<Project, 'date'>;

const { thumbnail, title, descriptions, tags, links } = Astro.props;
---

<div class="flex flex-col lg:flex-row lg:items-center lg:gap-12">
  <div
    class="group relative h-[260px] shrink-0 overflow-hidden rounded-2xl lg:h-[240px] lg:w-[320px] lg:cursor-pointer"
  >
    <Image
      class="h-full w-full object-cover transition-[filter] lg:group-hover:blur-sm"
      src={thumbnail}
      alt={`${title} 썸네일`}
    />
    <div
      class="absolute inset-0 hidden lg:block lg:duration-300 lg:group-hover:bg-dim-050 lg:group-hover:transition-colors"
    >
      <div
        class="absolute bottom-6 flex w-full translate-y-6 flex-col gap-4 px-6 opacity-0 lg:transition-all lg:duration-300 lg:group-hover:translate-y-0 lg:group-hover:opacity-100"
      >
        {Object.entries(links).map(([name, href]) => <ProjectCardDesktopLink name={name} href={href} />)}
      </div>
    </div>
  </div>

  <div>
    <div class="mt-6 flex w-full flex-col gap-3 lg:mt-0 lg:gap-4">
      <h3 class="truncate px-2 text-2xl font-bold text-black lg:px-0">{title}</h3>
      <div class="flex flex-col gap-1 px-2 text-gray-600 lg:h-[104px] lg:overflow-hidden lg:px-0">
        {descriptions.map((description) => <p>{description}</p>)}
      </div>
    </div>
    <ul class="mt-4 hidden gap-2 lg:flex">
      {tags.map((tag) => <li class="rounded-md bg-black px-4 py-2 text-sm text-white">#{tag}</li>)}
    </ul>
  </div>

  <div class="mt-6 flex gap-3 px-2 lg:hidden">
    {Object.entries(links).map(([name, href]) => <ProjectCardMobileLink name={name} href={href} />)}
  </div>
</div>
